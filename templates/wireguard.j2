[Interface]
PrivateKey = {{ wireguard_privatekey }}
Address = {{ wireguard_ipv4 }}/32
ListenPort = 51820

{% for host in groups.k3s_cluster %}
[Peer]
# Name = {{ host }}
PublicKey = {{ hostvars[host].wireguard_publickey }}
AllowedIPs = {{ hostvars[host].wireguard_ipv4 }}/32
Endpoint = {{ hostvars[host].wireguard_endpoint }}

{% endfor %}
[Peer]
# Name = airelien.local
PublicKey = t1PtcXiYL6Fl3mzEExwmybK6AYGnGwSKlN/NxPdrAwo=
AllowedIPs = 192.168.196.100/32
